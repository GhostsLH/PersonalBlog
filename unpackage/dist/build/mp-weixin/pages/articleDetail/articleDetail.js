(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/articleDetail/articleDetail"],{"216d":function(e,t,n){"use strict";n.r(t);var r=n("2923"),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},2923:function(e,t,n){"use strict";(function(e){var r=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n("2eee")),o=r(n("448a")),i=r(n("9523")),u=r(n("c973")),c=n("9df4");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={components:{uParse:function(){Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(function(){return resolve(n("999e"))}.bind(null,n)).catch(n.oe)}},onLoad:function(){this.articleData=this.$Router.currentRoute.query,this._getArticleDetail(),this._getCommentList()},data:function(){return{articleData:null,showPopup:!1,commentList:[],replyData:{}}},methods:{_getArticleDetail:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get_article_detail({article_id:e.articleData._id});case 2:n=t.sent,e.articleData=n;case 4:case"end":return t.stop()}}),t)})))()},openMaskerComment:function(){var e=this;return(0,u.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkedisLogin();case 2:e.showPopup=!0;case 3:case"end":return t.stop()}}),t)})))()},_sendCommentData:function(t){var n=this;return(0,u.default)(a.default.mark((function r(){var o,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$http.update_comment(l({userId:n.userInfo._id,articleId:n.articleData._id,content:t},n.replyData));case 2:o=r.sent,i=o.msg,e.showToast({title:i}),n.showPopup=!1,n.replyData={},n._getCommentList();case 8:case"end":return r.stop()}}),r)})))()},_getCommentList:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get_comments({articleId:e.articleData._id});case 2:n=t.sent,e.commentList=n;case 4:case"end":return t.stop()}}),t)})))()},commentReply:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.replyData={comment_id:e.comment.comment_id,is_reply:e.isReply},e.comment.reply_id&&(t.replyData.reply_id=e.comment.reply_id),t.openMaskerComment();case 3:case"end":return n.stop()}}),n)})))()},_followAuthor:function(){var t=this;return(0,u.default)(a.default.mark((function n(){var r,i,u;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.checkedisLogin();case 2:return n.next=4,t.$http.update_follow_author({authorId:t.articleData.author.id,userId:t.userInfo._id});case 4:r=n.sent,i=r.msg,e.showToast({title:i}),u=(0,o.default)(t.userInfo.author_likes_ids),u.includes(t.articleData.author.id)?u=u.filter((function(e){return e!=t.articleData.author.id})):u.push(t.articleData.author.id),t.updateUserInfo(l(l({},t.userInfo),{},{author_likes_ids:u})),e.$emit("updateFollowAuthor");case 11:case"end":return n.stop()}}),n)})))()},goCommentPage:function(){e.navigateTo({url:"/pages/commentList/commentList?id=".concat(this.articleData._id)})}},computed:{content:function(){try{return(0,c.marked)(this.articleData.content)}catch(e){return null}},isFollowAuthor:function(){return this.userInfo&&this.userInfo.author_likes_ids.includes(this.articleData.author.id)}}};t.default=d}).call(this,n("543d")["default"])},"6bc5":function(e,t,n){"use strict";n.r(t);var r=n("e417"),a=n("216d");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("6c21");var i=n("f0c5"),u=Object(i["a"])(a["default"],r["b"],r["c"],!1,null,"d1d34dd0",null,!1,r["a"],void 0);t["default"]=u.exports},"6c21":function(e,t,n){"use strict";var r=n("b69a"),a=n.n(r);a.a},b69a:function(e,t,n){},bfda:function(e,t,n){"use strict";(function(e,t){var r=n("4ea4");n("23c7"),n("a9ff");r(n("66fd"));var a=r(n("6bc5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},e417:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var r={uParse:function(){return Promise.all([n.e("common/vendor"),n.e("components/u-parse/u-parse")]).then(n.bind(null,"999e"))},CommentBox:function(){return n.e("components/CommentBox/CommentBox").then(n.bind(null,"3803"))},uniIcons:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(n.bind(null,"b8ec"))},SaveLikes:function(){return n.e("components/SaveLikes/SaveLikes").then(n.bind(null,"b5c1"))},CommentMasker:function(){return n.e("components/CommentMasker/CommentMasker").then(n.bind(null,"82e8"))}},a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.commentList.length);e._isMounted||(e.e0=function(t){e.showPopup=t}),e.$mp.data=Object.assign({},{$root:{g0:n}})},o=[]}},[["bfda","common/runtime","common/vendor"]]]);